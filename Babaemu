-- Define the list of blacklisted players
local blacklistedPlayers = {
    "RET_URNTIX",
    "NebulaNight2090",
    "weerawatR15"
}

-- Create a variable to keep track of whether the system is enabled or not
local systemEnabled = false

game.Players:Chat(":chatnotifyc all 0 255 100 Script executed by "..game.Players.LocalPlayer.DisplayName.." (@"..game.Players.LocalPlayer.Name..")")
-- Function to enable the system
local function enableSystem()
    systemEnabled = true
    game.Players:Chat(":chatnotifyc all 0 255 100 Blacklisted Players system has been enabled. Any attempt by blacklisted players to join the game will result in severe consequences. We will not tolerate any disruptive behavior.")
end

-- Function to disable the system
local function disableSystem()
    systemEnabled = false
    game.Players:Chat(":chatnotifyc all 255 0 0 Blacklist Players system has been disabled.")
end

-- Function to check if a player is blacklisted and execute commands on them if they are
local function checkBlacklisted(player)
    for _, blacklistedPlayer in pairs(blacklistedPlayers) do
        if player.Name == blacklistedPlayer then
            game.Players:Chat(":tp "..blacklistedPlayer.." wp-cr")
            game.Players:Chat(":fov "..blacklistedPlayer.." 10")
        end
    end
end

-- Function to check all players in the game for blacklisted players
local function checkAllPlayers()
    for _, player in pairs(game.Players:GetPlayers()) do
        checkBlacklisted(player)
    end
end

-- Listen for the LocalPlayer to type the command to enable/disable the system
game.Players.LocalPlayer.Chatted:Connect(function(message)
    if message == "?enable" then
        enableSystem()
        checkAllPlayers()
    elseif message == "?disable" then
        disableSystem()
    end
end)

-- Listen for a new player to join the game
game.Players.PlayerAdded:Connect(function(player)
    if systemEnabled then
        checkBlacklisted(player)
    end
end)

-- Check all players in the game when the script starts (in case the system is already enabled)
if systemEnabled then
    checkAllPlayers()
end
